<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detailed Carbon Footprint Calculator | Soular</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#40a2ff',
                        secondary: '#ff2941',
                        darkbg: '#181818',
                        darkcard: '#2A2A2A'
                    }
                }
            }
        };

        // Dark mode detection (same as before)
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });
    </script>
    <style>
        .loader { /* Style unchanged */ }
        @keyframes spinner { /* Style unchanged */ }
        .carbon-gauge { /* Style unchanged */ }
        label { display: block; margin-bottom: 0.25rem; font-size: 0.875rem; font-medium; }
        select, input[type="number"] {
            width: 100%;
            padding: 0.5rem;
            border-radius: 0.375rem;
            border: 1px solid #D1D5DB; /* gray-300 */
            background-color: #FFF; /* white */
            color: #111827; /* gray-900 */
        }
        .dark select, .dark input[type="number"] {
            border-color: #4B5563; /* dark:gray-600 */
            background-color: #374151; /* dark:gray-700 */
            color: #F9FAFB; /* dark:gray-50 */
        }
    </style>
</head>
<body class="bg-white dark:bg-darkbg text-gray-900 dark:text-gray-100">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        // --- Emission Factors (Simplified Averages - Replace with more accurate/regional data if needed) ---
        const EMISSION_FACTORS = {
            transport: {
                car_gas_avg: 0.40, // kg CO2e per mile (avg US car)
                car_electric: 0.15, // kg CO2e per mile (avg US grid mix, varies greatly by region)
                bus: 0.10, // kg CO2e per passenger mile
                train: 0.08, // kg CO2e per passenger mile
                motorcycle: 0.18, // kg CO2e per mile
                plane_short: 0.25, // kg CO2e per passenger mile (<300 miles)
                plane_medium: 0.18, // kg CO2e per passenger mile (300-2300 miles)
                plane_long: 0.15, // kg CO2e per passenger mile (>2300 miles)
            },
            diet: { // Annual tons CO2e per person
                meat_heavy: 3.3,
                meat_average: 2.5,
                vegetarian: 1.7,
                vegan: 1.5,
            },
            energy: {
                electricity_kwh: 0.4, // kg CO2e per kWh (US avg grid)
                natural_gas_therm: 5.3, // kg CO2e per therm
                heating_oil_gallon: 10.1, // kg CO2e per gallon
                propane_gallon: 5.7, // kg CO2e per gallon
                // Average annual consumption estimates (vary hugely)
                home_electricity: { // kWh per year
                    apartment: 4000,
                    small_house: 8000,
                    medium_house: 11000,
                    large_house: 15000,
                },
                home_heating_gas: { // therms per year
                    apartment: 300,
                    small_house: 500,
                    medium_house: 700,
                    large_house: 1000,
                },
                 home_heating_oil: { // gallons per year
                    apartment: 200,
                    small_house: 400,
                    medium_house: 600,
                    large_house: 800,
                },
                 home_heating_propane: { // gallons per year
                    apartment: 250,
                    small_house: 450,
                    medium_house: 650,
                    large_house: 900,
                }
            },
            goods: { // Annual tons CO2e per person based on spending habits
                low: 0.8,
                medium: 1.5,
                high: 3.0,
                very_high: 5.0
            }
        };

        function App() {
            // --- State for User Inputs ---
            const [inputs, setInputs] = useState({
                // Transport
                primaryVehicle: 'car_gas_avg',
                weeklyMilesDriven: 50,
                publicTransportMiles: 10,
                flightsShortPerYear: 1, // < 3 hours approx
                flightsMediumPerYear: 1, // 3-6 hours approx
                flightsLongPerYear: 0, // > 6 hours approx

                // Food
                dietType: 'meat_average',

                // Energy
                homeType: 'medium_house',
                electricityUsageKnown: false, // Toggle for manual input
                annualKWh: EMISSION_FACTORS.energy.home_electricity.medium_house, // Default estimate
                primaryHeatingFuel: 'natural_gas',
                heatingUsageKnown: false, // Toggle for manual input
                annualHeatingUnits: EMISSION_FACTORS.energy.home_heating_gas.medium_house, // Default estimate (therms for gas)

                // Goods
                shoppingHabits: 'medium', // 'low', 'medium', 'high', 'very_high'
            });

            const [user, setUser] = useState({ // User profile state unchanged
                name: "Guest User",
                points: 240,
                level: 3,
                footprint: 8.2, // Will be updated by calculation
                actions: 12,
                avatar: "https://i.imgur.com/HYsTHOF.png"
            });

            const [showModal, setShowModal] = useState(false);
            const [modalContent, setModalContent] = useState("");

            // --- Input Change Handler ---
            const handleInputChange = (event) => {
                const { name, value, type, checked } = event.target;
                const val = type === 'checkbox' ? checked : (type === 'number' ? parseFloat(value) || 0 : value);

                setInputs(prev => {
                    const newState = { ...prev, [name]: val };

                    // Update default energy estimates if homeType changes and usage isn't manually set
                    if (name === 'homeType') {
                        if (!newState.electricityUsageKnown) {
                            newState.annualKWh = EMISSION_FACTORS.energy.home_electricity[val] || 0;
                        }
                        if (!newState.heatingUsageKnown) {
                           const fuel = newState.primaryHeatingFuel;
                           if (fuel === 'natural_gas') newState.annualHeatingUnits = EMISSION_FACTORS.energy.home_heating_gas[val] || 0;
                           else if (fuel === 'heating_oil') newState.annualHeatingUnits = EMISSION_FACTORS.energy.home_heating_oil[val] || 0;
                           else if (fuel === 'propane') newState.annualHeatingUnits = EMISSION_FACTORS.energy.home_heating_propane[val] || 0;
                           else newState.annualHeatingUnits = 0; // Reset for electric/other
                        }
                    }
                    // Update default heating estimate if fuel type changes and usage isn't manually set
                     if (name === 'primaryHeatingFuel' && !newState.heatingUsageKnown) {
                           const home = newState.homeType;
                           if (val === 'natural_gas') newState.annualHeatingUnits = EMISSION_FACTORS.energy.home_heating_gas[home] || 0;
                           else if (val === 'heating_oil') newState.annualHeatingUnits = EMISSION_FACTORS.energy.home_heating_oil[home] || 0;
                           else if (val === 'propane') newState.annualHeatingUnits = EMISSION_FACTORS.energy.home_heating_propane[home] || 0;
                           else newState.annualHeatingUnits = 0; // Reset for electric/other
                    }

                    return newState;
                });
            };


            // --- Calculation Logic (using useMemo for efficiency) ---
            const footprintData = useMemo(() => {
                let transport = 0;
                let food = 0;
                let energy = 0;
                let goods = 0;

                // Transport Calculation
                const annualMilesDriven = inputs.weeklyMilesDriven * 52;
                const vehicleFactor = EMISSION_FACTORS.transport[inputs.primaryVehicle] || 0;
                transport += (annualMilesDriven * vehicleFactor) / 1000; // Convert kg to tons

                const annualPublicMiles = inputs.publicTransportMiles * 52;
                 // Using bus factor as a proxy for general public transport
                transport += (annualPublicMiles * EMISSION_FACTORS.transport.bus) / 1000;

                // Rough flight estimates (using average distances)
                const shortFlightDist = 500; // miles
                const mediumFlightDist = 1500; // miles
                const longFlightDist = 4000; // miles
                transport += (inputs.flightsShortPerYear * shortFlightDist * EMISSION_FACTORS.transport.plane_short) / 1000;
                transport += (inputs.flightsMediumPerYear * mediumFlightDist * EMISSION_FACTORS.transport.plane_medium) / 1000;
                transport += (inputs.flightsLongPerYear * longFlightDist * EMISSION_FACTORS.transport.plane_long) / 1000;

                // Food Calculation
                food = EMISSION_FACTORS.diet[inputs.dietType] || 0;

                // Energy Calculation
                energy += (inputs.annualKWh * EMISSION_FACTORS.energy.electricity_kwh) / 1000;

                let heatingFactor = 0;
                if (inputs.primaryHeatingFuel === 'natural_gas') heatingFactor = EMISSION_FACTORS.energy.natural_gas_therm;
                else if (inputs.primaryHeatingFuel === 'heating_oil') heatingFactor = EMISSION_FACTORS.energy.heating_oil_gallon;
                else if (inputs.primaryHeatingFuel === 'propane') heatingFactor = EMISSION_FACTORS.energy.propane_gallon;
                // Note: Electric heating is accounted for in the main electricity usage (annualKWh)

                energy += (inputs.annualHeatingUnits * heatingFactor) / 1000;

                // Goods Calculation
                goods = EMISSION_FACTORS.goods[inputs.shoppingHabits] || 0;

                const total = transport + food + energy + goods;

                // Update user profile footprint
                setUser(prev => ({...prev, footprint: total}));

                return {
                    transport: transport,
                    food: food,
                    energy: energy,
                    goods: goods,
                    total: total
                };
            }, [inputs]); // Recalculate only when inputs change


            // --- Recommendations (can be made more specific based on calculated category values) ---
             const generateRecommendations = (calculatedFootprint, details) => {
                const recommendations = [];
                // General High Footprint
                if (calculatedFootprint > 15) { // Adjusted threshold for detailed calc
                     recommendations.push("Your footprint is significantly high. Consider major lifestyle changes across categories.");
                }

                // Category-Specific Recommendations
                if (details.transport > 4) {
                    if(inputs.primaryVehicle.includes('car')) recommendations.push("Transportation Footprint High: Explore reducing car travel, using public transport, biking, or considering a more fuel-efficient/electric vehicle.");
                    if(inputs.flightsLongPerYear > 1 || inputs.flightsMediumPerYear > 3) recommendations.push("Transportation Footprint High: Reduce air travel, especially long-haul flights, or consider carbon offsets.");
                } else if (details.transport > 2) {
                     recommendations.push("Transportation: Look for opportunities to combine trips, carpool, or use public transport for some journeys.");
                }

                 if (details.food > 2.8) {
                    recommendations.push("Food Footprint High: Reduce consumption of red meat (beef, lamb). Explore more plant-based meals.");
                } else if (details.food > 2.0) {
                     recommendations.push("Food: Try incorporating more 'Meatless Mondays' or reducing meat portion sizes.");
                }

                 if (details.energy > 3) {
                    recommendations.push("Energy Footprint High: Investigate home insulation improvements, switch to LED lighting, unplug unused electronics, and consider energy-efficient appliances.");
                     if(inputs.primaryHeatingFuel !== 'electric' && inputs.primaryHeatingFuel !== 'other_renewable') recommendations.push("Energy: Explore options for switching to renewable heating sources or improving heating system efficiency.");
                 } else if (details.energy > 1.5) {
                    recommendations.push("Energy: Adjust thermostat settings seasonally, seal air leaks around windows/doors, and use smart power strips.");
                 }

                 if (details.goods > 2.5) {
                    recommendations.push("Goods/Services Footprint High: Focus on reducing consumption, buying secondhand, repairing items, and choosing products with minimal packaging.");
                 } else if (details.goods > 1.2) {
                    recommendations.push("Goods/Services: Prioritize experiences over material goods, borrow or rent items when possible, and recycle diligently.");
                 }

                 // Low Footprint Encouragement
                 if (calculatedFootprint < 7) { // Adjusted threshold
                     recommendations.push("Great job maintaining a lower footprint! Consider sharing your sustainable practices or exploring local environmental initiatives.");
                     if (recommendations.length === 1) { // If only the low footprint message is there
                         recommendations.push("Look into community solar or advocating for sustainable policies.");
                     }
                 }

                 // Ensure at least 3 recommendations if possible, adding generic ones if needed
                 const genericRecs = [
                     "Switch to a renewable energy provider if available.",
                     "Reduce food waste by planning meals and composting.",
                     "Support businesses with strong sustainability practices."
                 ];
                 let recIndex = 0;
                 while (recommendations.length < 3 && recIndex < genericRecs.length) {
                     if (!recommendations.includes(genericRecs[recIndex])) {
                         recommendations.push(genericRecs[recIndex]);
                     }
                     recIndex++;
                 }


                return recommendations.slice(0, 4); // Limit to 4 recommendations
            };


            const totalFootprint = footprintData.total;

            return (
                <div className="max-w-3xl mx-auto px-4 py-6">
                    <header className="flex items-center justify-between mb-6">
                        {/* Header unchanged */}
                        <div className="flex items-center">
                            <span className="text-primary text-4xl mr-2">🌱</span>
                            <h1 className="text-2xl font-bold">Detailed Carbon Footprint Calculator</h1>
                        </div>
                    </header>

                    <main>
                        <div className="space-y-6">
                            {/* --- Input Section --- */}
                            <div className="bg-white dark:bg-darkcard rounded-lg shadow p-4">
                                <h2 className="text-xl font-bold mb-4">Your Lifestyle Details</h2>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4">

                                    {/* Transportation Inputs */}
                                    <fieldset className="border dark:border-gray-700 p-3 rounded">
                                        <legend className="text-lg font-semibold px-1">Transportation</legend>
                                        <div className="space-y-3">
                                            <div>
                                                <label htmlFor="primaryVehicle">Primary Vehicle/Mode</label>
                                                <select id="primaryVehicle" name="primaryVehicle" value={inputs.primaryVehicle} onChange={handleInputChange}>
                                                    <option value="car_gas_avg">Car (Average Gas)</option>
                                                    <option value="car_electric">Car (Electric)</option>
                                                    <option value="motorcycle">Motorcycle</option>
                                                    <option value="bus">Primarily Bus</option>
                                                    <option value="train">Primarily Train</option>
                                                    <option value="bike_walk">Primarily Bike/Walk</option> {/* Add factor if needed */}
                                                </select>
                                            </div>
                                            <div>
                                                <label htmlFor="weeklyMilesDriven">Weekly Miles in Private Vehicle (Car/Motorcycle)</label>
                                                <input type="number" id="weeklyMilesDriven" name="weeklyMilesDriven" value={inputs.weeklyMilesDriven} onChange={handleInputChange} min="0" />
                                            </div>
                                             <div>
                                                <label htmlFor="publicTransportMiles">Weekly Miles via Public Transport (Bus/Train)</label>
                                                <input type="number" id="publicTransportMiles" name="publicTransportMiles" value={inputs.publicTransportMiles} onChange={handleInputChange} min="0" />
                                            </div>
                                            <div className="grid grid-cols-3 gap-2">
                                                <div>
                                                    <label htmlFor="flightsShortPerYear" className="text-xs">Short Flights/yr (&lt;3hr)</label>
                                                    <input type="number" id="flightsShortPerYear" name="flightsShortPerYear" value={inputs.flightsShortPerYear} onChange={handleInputChange} min="0" />
                                                </div>
                                                <div>
                                                    <label htmlFor="flightsMediumPerYear" className="text-xs">Medium Flights/yr (3-6hr)</label>
                                                    <input type="number" id="flightsMediumPerYear" name="flightsMediumPerYear" value={inputs.flightsMediumPerYear} onChange={handleInputChange} min="0" />
                                                </div>
                                                 <div>
                                                    <label htmlFor="flightsLongPerYear" className="text-xs">Long Flights/yr (&gt;6hr)</label>
                                                    <input type="number" id="flightsLongPerYear" name="flightsLongPerYear" value={inputs.flightsLongPerYear} onChange={handleInputChange} min="0" />
                                                </div>
                                            </div>
                                            <p className="text-sm font-medium text-right">Est. Transport: {footprintData.transport.toFixed(1)} tons</p>
                                        </div>
                                    </fieldset>

                                    {/* Food Inputs */}
                                     <fieldset className="border dark:border-gray-700 p-3 rounded">
                                        <legend className="text-lg font-semibold px-1">Food & Diet</legend>
                                        <div className="space-y-3">
                                            <div>
                                                <label htmlFor="dietType">Describe Your Diet</label>
                                                <select id="dietType" name="dietType" value={inputs.dietType} onChange={handleInputChange}>
                                                    <option value="meat_heavy">Meat in most meals</option>
                                                    <option value="meat_average">Average omnivore (meat 5-7 times/week)</option>
                                                    <option value="vegetarian">Vegetarian (no meat/fish)</option>
                                                    <option value="vegan">Vegan (no animal products)</option>
                                                </select>
                                            </div>
                                             <p className="text-sm font-medium text-right pt-4">Est. Food: {footprintData.food.toFixed(1)} tons</p>
                                        </div>
                                    </fieldset>

                                    {/* Energy Inputs */}
                                     <fieldset className="border dark:border-gray-700 p-3 rounded">
                                        <legend className="text-lg font-semibold px-1">Home Energy</legend>
                                        <div className="space-y-3">
                                            <div>
                                                <label htmlFor="homeType">Type of Home</label>
                                                <select id="homeType" name="homeType" value={inputs.homeType} onChange={handleInputChange}>
                                                    <option value="apartment">Apartment / Condo</option>
                                                    <option value="small_house">Small House (~1000 sqft)</option>
                                                    <option value="medium_house">Medium House (~2000 sqft)</option>
                                                    <option value="large_house">Large House (&gt;2500 sqft)</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label htmlFor="primaryHeatingFuel">Primary Heating Source</label>
                                                <select id="primaryHeatingFuel" name="primaryHeatingFuel" value={inputs.primaryHeatingFuel} onChange={handleInputChange}>
                                                    <option value="natural_gas">Natural Gas</option>
                                                    <option value="heating_oil">Heating Oil</option>
                                                    <option value="propane">Propane</option>
                                                    <option value="electric">Electric (Baseboard/Furnace)</option>
                                                    <option value="other_renewable">Wood / Solar / Geothermal</option>
                                                </select>
                                            </div>
                                            {/* Optional Manual Input Toggles/Fields */}
                                            <div>
                                                <label htmlFor="electricityUsageKnown" className="inline-flex items-center">
                                                    <input type="checkbox" id="electricityUsageKnown" name="electricityUsageKnown" checked={inputs.electricityUsageKnown} onChange={handleInputChange} className="mr-2"/>
                                                    Manually enter annual electricity usage?
                                                </label>
                                                {inputs.electricityUsageKnown && (
                                                    <div className="mt-1">
                                                        <label htmlFor="annualKWh">Annual Electricity (kWh)</label>
                                                        <input type="number" id="annualKWh" name="annualKWh" value={inputs.annualKWh} onChange={handleInputChange} min="0"/>
                                                    </div>
                                                )}
                                            </div>
                                             {inputs.primaryHeatingFuel !== 'electric' && inputs.primaryHeatingFuel !== 'other_renewable' && (
                                                <div>
                                                    <label htmlFor="heatingUsageKnown" className="inline-flex items-center">
                                                        <input type="checkbox" id="heatingUsageKnown" name="heatingUsageKnown" checked={inputs.heatingUsageKnown} onChange={handleInputChange} className="mr-2"/>
                                                        Manually enter annual heating fuel usage?
                                                    </label>
                                                    {inputs.heatingUsageKnown && (
                                                        <div className="mt-1">
                                                            <label htmlFor="annualHeatingUnits">Annual Heating Fuel ({
                                                                inputs.primaryHeatingFuel === 'natural_gas' ? 'Therms' : 'Gallons'
                                                            })</label>
                                                            <input type="number" id="annualHeatingUnits" name="annualHeatingUnits" value={inputs.annualHeatingUnits} onChange={handleInputChange} min="0"/>
                                                        </div>
                                                    )}
                                                </div>
                                             )}
                                              <p className="text-sm font-medium text-right">Est. Energy: {footprintData.energy.toFixed(1)} tons</p>
                                        </div>
                                    </fieldset>

                                    {/* Goods Inputs */}
                                     <fieldset className="border dark:border-gray-700 p-3 rounded">
                                        <legend className="text-lg font-semibold px-1">Goods & Services</legend>
                                        <div className="space-y-3">
                                            <div>
                                                <label htmlFor="shoppingHabits">Spending on non-essential goods (clothing, electronics, furniture, entertainment etc.)</label>
                                                <select id="shoppingHabits" name="shoppingHabits" value={inputs.shoppingHabits} onChange={handleInputChange}>
                                                    <option value="low">Low (Minimal, mostly essentials)</option>
                                                    <option value="medium">Medium (Average purchases)</option>
                                                    <option value="high">High (Frequent purchases, latest trends)</option>
                                                    <option value="very_high">Very High (Luxury goods, frequent upgrades)</option>
                                                </select>
                                            </div>
                                            <p className="text-sm font-medium text-right pt-4">Est. Goods: {footprintData.goods.toFixed(1)} tons</p>
                                        </div>
                                    </fieldset>

                                </div>
                            </div>

                            {/* --- Summary Section --- */}
                             <div className="bg-white dark:bg-darkcard rounded-lg shadow p-4">
                                <h2 className="text-xl font-bold mb-4">Your Estimated Carbon Footprint</h2>
                                 <div className="flex flex-col md:flex-row gap-4 items-center">
                                     {/* Category Breakdown (Optional Detailed View) */}
                                     <div className="w-full md:w-1/2 space-y-2">
                                         <p>Transportation: {footprintData.transport.toFixed(1)} tons</p>
                                         <p>Food & Diet: {footprintData.food.toFixed(1)} tons</p>
                                         <p>Home Energy: {footprintData.energy.toFixed(1)} tons</p>
                                         <p>Goods & Services: {footprintData.goods.toFixed(1)} tons</p>
                                     </div>
                                     {/* Total Gauge */}
                                     <div className="w-full md:w-1/2 flex flex-col items-center">
                                         <div className="text-center mb-2">
                                             <span className="text-3xl font-bold">{totalFootprint.toFixed(1)}</span>
                                             <span className="text-xl ml-1">tons CO₂e / year</span>
                                         </div>
                                         {/* Gauge Visualization (adjust max value if needed) */}
                                         <div className="w-40 h-40 rounded-full border-8 border-gray-200 dark:border-gray-700 relative flex items-center justify-center">
                                             <div className="absolute inset-0 overflow-hidden rounded-full">
                                                 <div
                                                     className="carbon-gauge absolute bottom-0 left-0 right-0 bg-gradient-to-t from-red-500 via-yellow-400 to-green-400"
                                                     style={{ height: `${Math.min(100, (totalFootprint / 20) * 100)}%` }} /* Adjusted max scale to 20 tons */
                                                 ></div>
                                             </div>
                                             <div className="relative z-10 text-center">
                                                 <p className="text-sm font-medium">Your Impact</p>
                                                 {totalFootprint > 15 ? (
                                                     <p className="text-xs text-red-500">Very High</p>
                                                 ) : totalFootprint > 10 ? (
                                                     <p className="text-xs text-red-500">High</p>
                                                 ) : totalFootprint > 6 ? (
                                                     <p className="text-xs text-yellow-500">Medium</p>
                                                 ) : (
                                                     <p className="text-xs text-green-500">Low</p>
                                                 )}
                                             </div>
                                         </div>
                                         <p className="text-xs text-gray-500 dark:text-gray-400 mt-2">Global average: ~4.8 tons | HK average: ~4.4 tons</p>
                                     </div>
                                 </div>
                             </div>

                            {/* Recommendations Section */}
                            <div className="bg-white dark:bg-darkcard rounded-lg shadow p-4">
                                <h2 className="text-xl font-bold mb-4">Personal Recommendations</h2>
                                <div className="space-y-3">
                                    {generateRecommendations(totalFootprint, footprintData).map((rec, i) => (
                                        <div key={i} className="p-3 border border-gray-200 dark:border-gray-700 rounded-lg flex items-start">
                                            <span className="mr-3 text-green-500 text-xl">✓</span>
                                            <p>{rec}</p>
                                        </div>
                                    ))}
                                </div>
                                <button
                                    className="mt-6 bg-primary text-white rounded-lg px-4 py-2 w-full font-medium hover:bg-opacity-90 transition"
                                    onClick={() => { /* Commit action unchanged */
                                        setUser(prev => ({
                                            ...prev,
                                            points: prev.points + 50,
                                            actions: prev.actions + 1
                                        }));
                                        setModalContent("🎉 Commitment registered! +50 points");
                                        setShowModal(true);
                                        setTimeout(() => setShowModal(false), 2000);
                                    }}
                                >
                                    Commit to Taking Action
                                </button>
                            </div>

                            {/* Did You Know Section (Unchanged) */}
                            <div className="bg-white dark:bg-darkcard rounded-lg shadow p-4 mt-6">
                                {/* ... content unchanged ... */}
                                 <h2 className="text-xl font-bold mb-4">Did You Know?</h2>
                                <div className="p-4 bg-blue-50 dark:bg-gray-800 rounded-lg">
                                    <p className="text-sm">
                                        Reducing your carbon footprint by just 1 ton is equivalent to planting
                                        16.5 trees or taking one car off the road for three months!
                                        <a
                                            href="https://www.anthesisgroup.com/insights/what-exactly-is-1-tonne-of-co2/#:~:text=1%20tonne%20of%20CO2%20is%20equivalent%20to%3A,trips%20of%20300%20miles%20each."
                                            className="ml-2 text-primary hover:underline"
                                            target="_blank"
                                            rel="noopener noreferrer"
                                        >
                                            Learn more
                                        </a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </main>

                    {/* Modal unchanged */}
                    {showModal && (
                        <div className="fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white rounded-lg py-2 px-4 shadow-lg">
                            {modalContent}
                        </div>
                    )}
                </div>
            );
        }

        ReactDOM.render(
            <App />,
            document.getElementById('root')
        );
    </script>
</body>
</html>